<!DOCTYPE html>
<html lang="no">
  <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Viking River Race - The Gathering</title>
      <style>
                @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

                * {
                              margin: 0;
                              padding: 0;
                              box-sizing: border-box;
                }

                body {
                              background: #0a0a0a;
                              display: flex;
                              justify-content: center;
                              align-items: center;
                              min-height: 100vh;
                              font-family: 'Press Start 2P', cursive;
                              overflow: hidden;
                }

                #gameContainer {
                              position: relative;
                              width: 100vw;
                              height: 100vh;
                              max-width: 100%;
                              max-height: 100%;
                }

                canvas {
                              display: block;
                              width: 100%;
                              height: 100%;
                              touch-action: none;
                }

                #gameUI {
                              position: absolute;
                              top: 20px;
                              left: 20px;
                              right: 20px;
                              z-index: 10;
                }

                #score {
                              font-size: clamp(12px, 4vw, 20px);
                              color: #00ff00;
                              text-shadow: 0 0 10px #00ff00;
                              padding: 10px;
                              background: rgba(0, 0, 0, 0.8);
                              border: 2px solid #00ff00;
                              display: inline-block;
                }

                #gameOver {
                              position: absolute;
                              top: 50%;
                              left: 50%;
                              transform: translate(-50%, -50%);
                              background: rgba(0, 0, 0, 0.95);
                              border: 4px solid #ff00ff;
                              padding: 30px;
                              text-align: center;
                              z-index: 100;
                              box-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
                              border-radius: 10px;
                }

                #gameOver h1 {
                              font-size: clamp(20px, 8vw, 40px);
                              color: #ff0000;
                              text-shadow: 0 0 20px #ff0000;
                              margin-bottom: 20px;
                }

                #gameOver p {
                              font-size: clamp(10px, 4vw, 16px);
                              color: #ffff00;
                              text-shadow: 0 0 10px #ffff00;
                              margin: 10px 0;
                }

                #gameOver button, #gameOver a {
                              background: #00ff00;
                              color: #000;
                              border: 2px solid #000;
                              padding: clamp(8px, 3vw, 15px);
                              font-size: clamp(10px, 3vw, 14px);
                              font-family: 'Press Start 2P', cursive;
                              cursor: pointer;
                              margin: 10px;
                              border-radius: 5px;
                              text-decoration: none;
                              display: inline-block;
                }

                #gameOver button:hover, #gameOver a:hover {
                              background: #00ffff;
                              text-shadow: 0 0 10px #00ffff;
                }
            </style>
  </head>
  <body>
        <div id="gameContainer">
                  <canvas id="gameCanvas"></canvas>canvas>
                  <div id="gameUI">
                                <div id="score">Distance: 0m</div>div>
                                <div id="gameOver" style="display:none;">
                                                  <h1>GAME OVER</h1>
                                                <p id="finalScore">Distance: 0m</p>p>
                                                <p id="message"></p>p>
                                                <button onclick="location.reload()">Play Again</button>button>
                                                <a href="index.html">Back to Main</a>a>
                                </div>div>
                  </div>div>
        </div>div>
  
      <script>
                const canvas = document.getElementById('gameCanvas');
                const ctx = canvas.getContext('2d');

                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                const ship = {
                              x: canvas.width / 2,
                              y: canvas.height - 100,
                              width: 30,
                              height: 50,
                              speed: 5,
                              moveLeft: false,
                              moveRight: false
                };

                let gameActive = true;
                let distance = 0;
                let obstacles = [];
                let scrollOffset = 0;
                const RIVER_WIDTH = 150;
                const RIVER_LEFT = (canvas.width - RIVER_WIDTH) / 2;
                const RIVER_RIGHT = RIVER_LEFT + RIVER_WIDTH;

                window.addEventListener('keydown', (e) => {
                              if (e.key === 'ArrowLeft') ship.moveLeft = true;
                              if (e.key === 'ArrowRight') ship.moveRight = true;
                });

                window.addEventListener('keyup', (e) => {
                              if (e.key === 'ArrowLeft') ship.moveLeft = false;
                              if (e.key === 'ArrowRight') ship.moveRight = false;
                });

                let touchStartX = 0;
                canvas.addEventListener('touchstart', (e) => {
                              touchStartX = e.touches[0].clientX;
                });

                canvas.addEventListener('touchmove', (e) => {
                              if (!gameActive) return;
                              const touchX = e.touches[0].clientX;
                              if (touchX < touchStartX - 10) ship.moveLeft = true;
                              else if (touchX > touchStartX + 10) ship.moveRight = true;
                              else {
                                                ship.moveLeft = false;
                                                ship.moveRight = false;
                              }
                });

                canvas.addEventListener('touchend', () => {
                              ship.moveLeft = false;
                              ship.moveRight = false;
                });

                function drawRiver() {
                              ctx.fillStyle = '#1a5f7a';
                              ctx.fillRect(RIVER_LEFT, 0, RIVER_WIDTH, canvas.height);

                              ctx.strokeStyle = '#8B7355';
                              ctx.lineWidth = 5;
                              ctx.beginPath();
                              ctx.moveTo(RIVER_LEFT, 0);
                              ctx.lineTo(RIVER_LEFT, canvas.height);
                              ctx.stroke();

                              ctx.beginPath();
                              ctx.moveTo(RIVER_RIGHT, 0);
                              ctx.lineTo(RIVER_RIGHT, canvas.height);
                              ctx.stroke();

                              ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                              ctx.lineWidth = 1;
                              for (let i = 0; i < canvas.height; i += 30) {
                                                ctx.beginPath();
                                                ctx.moveTo(RIVER_LEFT, i + scrollOffset % 30);
                                                ctx.lineTo(RIVER_RIGHT, i + scrollOffset % 30);
                                                ctx.stroke();
                              }
                }

                function drawShip() {
                              ctx.fillStyle = '#8b4513';
                              ctx.fillRect(ship.x - ship.width / 2, ship.y, ship.width, ship.height);

                              ctx.strokeStyle = '#ff6b00';
                              ctx.lineWidth = 2;
                              ctx.strokeRect(ship.x - ship.width / 2, ship.y, ship.width, ship.height);

                              ctx.fillStyle = '#ffff00';
                              ctx.beginPath();
                              ctx.moveTo(ship.x - ship.width / 4, ship.y);
                              ctx.lineTo(ship.x + ship.width / 4, ship.y);
                              ctx.lineTo(ship.x, ship.y - 15);
                              ctx.fill();
                }

                function createObstacles() {
                              if (Math.random() < 0.02) {
                                                const type = Math.random() < 0.5 ? 'stone' : 'log';
                                                const x = RIVER_LEFT + Math.random() * RIVER_WIDTH;
                                                obstacles.push({
                                                                      x: x,
                                                                      y: -50,
                                                                      width: 40,
                                                                      height: 40,
                                                                      type: type
                                                });
                              }
                }

                function drawObstacles() {
                              obstacles.forEach((obs) => {
                                                if (obs.type === 'stone') {
                                                                      ctx.fillStyle = '#808080';
                                                                      ctx.beginPath();
                                                                      ctx.arc(obs.x, obs.y, obs.width / 2, 0, Math.PI * 2);
                                                                      ctx.fill();
                                                                      ctx.strokeStyle = '#404040';
                                                                      ctx.lineWidth = 2;
                                                                      ctx.stroke();
                                                } else {
                                                                      ctx.fillStyle = '#654321';
                                                                      ctx.fillRect(obs.x - obs.width / 2, obs.y, obs.width, obs.height);
                                                                      ctx.strokeStyle = '#8b4513';
                                                                      ctx.lineWidth = 2;
                                                                      ctx.strokeRect(obs.x - obs.width / 2, obs.y, obs.width, obs.height);
                                                }
                              });
                }

                function updateObstacles() {
                              obstacles = obstacles.filter(obs => {
                                                obs.y += 3;
                                                return obs.y < canvas.height;
                              });
                }

                function checkCollisions() {
                              obstacles.forEach((obs) => {
                                                const shipLeft = ship.x - ship.width / 2;
                                                const shipRight = ship.x + ship.width / 2;
                                                const shipTop = ship.y;
                                                const shipBottom = ship.y + ship.height;

                                                const obsLeft = obs.x - obs.width / 2;
                                                const obsRight = obs.x + obs.width / 2;
                                                const obsTop = obs.y;
                                                const obsBottom = obs.y + obs.height;

                                                if (shipRight > obsLeft && shipLeft < obsRight &&
                                                                        shipBottom > obsTop && shipTop < obsBottom) {
                                                                      endGame(`CRASHED INTO ${obs.type.toUpperCase()}!`);
                                                }
                              });

                              const shipLeft = ship.x - ship.width / 2;
                              const shipRight = ship.x + ship.width / 2;

                              if (shipLeft < RIVER_LEFT || shipRight > RIVER_RIGHT) {
                                                endGame('CRASHED INTO BANK!');
                              }
                }

                function endGame(message) {
                              gameActive = false;
                              document.getElementById('gameOver').style.display = 'block';
                              document.getElementById('finalScore').textContent = `Distance: ${Math.floor(distance)}m`;
                              document.getElementById('message').textContent = message;
                }

                function updateGame() {
                              if (!gameActive) return;

                              if (ship.moveLeft && ship.x > RIVER_LEFT + ship.width / 2) {
                                                ship.x -= ship.speed;
                              }
                              if (ship.moveRight && ship.x < RIVER_RIGHT - ship.width / 2) {
                                                ship.x += ship.speed;
                              }

                              distance += 0.5;
                              scrollOffset += 3;
                              document.getElementById('score').textContent = `Distance: ${Math.floor(distance)}m`;

                              if (distance > 5000) {
                                                endGame('REACHED VIKINGSKIPET! ðŸ†');
                              }
                }

                function gameLoop() {
                              ctx.fillStyle = '#0a0a0a';
                              ctx.fillRect(0, 0, canvas.width, canvas.height);

                              drawRiver();
                              createObstacles();
                              updateObstacles();
                              drawObstacles();
                              checkCollisions();
                              drawShip();
                              updateGame();

                              requestAnimationFrame(gameLoop);
                }

                window.addEventListener('resize', () => {
                              canvas.width = window.innerWidth;
                              canvas.height = window.innerHeight;
                });

                gameLoop();
      </script>
  </body>
</html>html>
      </script></h1>
  </body>
      </style></title>
  </head>
